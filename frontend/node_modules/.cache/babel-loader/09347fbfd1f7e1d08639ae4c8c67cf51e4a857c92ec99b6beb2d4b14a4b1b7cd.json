{"ast":null,"code":"var _jsxFileName = \"D:\\\\Desktop\\\\linknest\\\\frontend\\\\src\\\\component\\\\widgets\\\\PostsWidget.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setPosts } from '../../state';\nimport PostWidget from './PostWidget';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PostsWidget = ({\n  userId,\n  isProfile = false\n}) => {\n  _s();\n  const dispatch = useDispatch();\n  const posts = useSelector(state => state.posts);\n  const token = useSelector(state => state.token);\n  const getPosts = async () => {\n    const res = await fetch(\"http://localhost:3001/posts\", {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const data = await res.json();\n    // Sort posts by createdAt in descending order\n    const sortedPosts = data.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n    dispatch(setPosts({\n      posts: sortedPosts\n    }));\n  };\n  const getUserPosts = async () => {\n    const res = await fetch(`http://localhost:3001/posts/${userId}/posts`, {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const data = await res.json();\n    // Sort posts by createdAt in descending order\n    const sortedPosts = data.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n    dispatch(setPosts({\n      posts: sortedPosts\n    }));\n  };\n  useEffect(() => {\n    if (isProfile) {\n      getUserPosts();\n    } else {\n      getPosts();\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: posts.map(({\n      _id,\n      userId,\n      firstName,\n      lastName,\n      description,\n      location,\n      picturePath,\n      userPicturePath,\n      likes,\n      comments,\n      createdAt\n    }) => /*#__PURE__*/_jsxDEV(PostWidget, {\n      postId: _id,\n      postUserId: userId,\n      name: `${firstName} ${lastName}`,\n      description: description,\n      location: location,\n      picturePath: picturePath,\n      userPicturePath: userPicturePath,\n      likes: likes,\n      comments: comments\n    }, _id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }, this))\n  }, void 0, false);\n};\n_s(PostsWidget, \"7TqOh3V0nCSP3QUJlbitnmq7L8o=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = PostsWidget;\nexport default PostsWidget;\nvar _c;\n$RefreshReg$(_c, \"PostsWidget\");","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","setPosts","PostWidget","jsxDEV","_jsxDEV","Fragment","_Fragment","PostsWidget","userId","isProfile","_s","dispatch","posts","state","token","getPosts","res","fetch","method","headers","Authorization","data","json","sortedPosts","sort","a","b","Date","createdAt","getUserPosts","children","map","_id","firstName","lastName","description","location","picturePath","userPicturePath","likes","comments","postId","postUserId","name","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Desktop/linknest/frontend/src/component/widgets/PostsWidget.js"],"sourcesContent":["import React from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setPosts } from '../../state';\r\nimport PostWidget from './PostWidget';\r\n\r\nconst PostsWidget = ({userId, isProfile= false}) => {\r\n    const dispatch= useDispatch();\r\n    const posts= useSelector((state) => state.posts);\r\n    const token= useSelector((state) => state.token);\r\n    \r\n\r\n    const getPosts= async () => {\r\n        const res= await fetch(\r\n            \"http://localhost:3001/posts\",\r\n            {\r\n            method: \"GET\",\r\n            headers: {Authorization: `Bearer ${token}`},\r\n            }\r\n        );\r\n        const data= await res.json();\r\n        // Sort posts by createdAt in descending order\r\n        const sortedPosts = data.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\r\n        dispatch(setPosts({ posts: sortedPosts }));\r\n    }\r\n\r\n    const getUserPosts= async () => {\r\n        const res= await fetch(\r\n            `http://localhost:3001/posts/${userId}/posts`,\r\n            {\r\n                method: \"GET\",\r\n                headers: {Authorization: `Bearer ${token}`},\r\n            }\r\n        );\r\n        const data= await res.json();\r\n        // Sort posts by createdAt in descending order\r\n        const sortedPosts = data.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\r\n        dispatch(setPosts({ posts: sortedPosts }));\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(isProfile){\r\n            getUserPosts();\r\n        }else{\r\n            getPosts();\r\n        }\r\n    }, []);\r\n\r\n  return (\r\n    <>\r\n        {posts.map(\r\n            ({\r\n              _id,\r\n              userId,\r\n              firstName,\r\n              lastName,\r\n              description,\r\n              location,\r\n              picturePath,\r\n              userPicturePath,\r\n              likes,\r\n              comments,  \r\n              createdAt\r\n            }) => (\r\n                <PostWidget\r\n                    key= {_id}\r\n                    postId= {_id}\r\n                    postUserId= {userId}\r\n                    name= {`${firstName} ${lastName}`}\r\n                    description= {description}\r\n                    location= {location}\r\n                    picturePath= {picturePath}\r\n                    userPicturePath= {userPicturePath}\r\n                    likes= {likes}\r\n                    comments= {comments}\r\n                />\r\n            )\r\n        )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PostsWidget;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}